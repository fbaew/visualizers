<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Particles Visualizer</title>
<link rel="stylesheet" href="../common.css">
</head>
<body>
<canvas id="canvas"></canvas>
<div class="controls">
  <button id="toggleSettings">Toggle Settings</button>
</div>
<div id="settings" class="settings-panel">
  <label>Particles: <input type="range" id="count" min="10" max="300" value="100"></label>
</div>
<script>
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
let width,height;
function resize(){
  width=canvas.width=window.innerWidth;
  height=canvas.height=window.innerHeight;
}
window.addEventListener('resize',resize);
class Particle{
  constructor(){
    this.reset();
  }
  reset(){
    this.x=Math.random()*width;
    this.y=Math.random()*height;
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*1+0.5;
    this.vx=Math.cos(a)*s;
    this.vy=Math.sin(a)*s;
    this.size=Math.random()*3+1;
  }
  update(){
    this.x+=this.vx;
    this.y+=this.vy;
    if(this.x<0||this.x>width||this.y<0||this.y>height) this.reset();
  }
  draw(){
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
    ctx.fill();
  }
}
let particles=[];
function createParticles(n){
  particles=[];
  for(let i=0;i<n;i++) particles.push(new Particle());
}
let count=100;
function loop(){
  ctx.fillStyle='rgba(0,0,0,0.2)';
  ctx.fillRect(0,0,width,height);
  ctx.fillStyle='#0ff';
  particles.forEach(p=>{p.update();p.draw();});
  requestAnimationFrame(loop);
}
document.getElementById('toggleSettings').onclick=()=>{
  settings.style.display=settings.style.display?'':'block';
};
count.oninput=()=>{count=parseInt(count.value,10);createParticles(count);};
resize();
createParticles(count);
loop();
</script>
</body>
</html>
